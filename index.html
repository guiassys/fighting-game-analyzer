<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Fighting Game Analyzer ‚Äì SF6 Coach</title>
<style>
  body { font-family: Arial, sans-serif; background:#0f1220; color:#eee; padding:12px; max-width:1200px; margin:auto; }
  h1 { text-align:center; color:#6cf; margin-bottom:4px; }
  .subtitle { text-align:center; font-size:12px; opacity:.9; margin-bottom:10px; }
  h2 { text-align:center; font-size:14px; color:#ffd166; margin:6px 0; }
  h3 { font-size:13px; color:#9bf6ff; margin:10px 0 4px; border-bottom:1px solid #2a2f5a; padding-bottom:2px; }
  .grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
  .panel { background:#121634; padding:8px; border-radius:8px; }
  .tech { background:#1b1f3a; padding:6px 8px; border-radius:6px; margin-bottom:6px;
          display:grid; grid-template-columns:120px 30px 26px 26px 26px; gap:6px; align-items:center; font-size:12px; }
  .tech span { font-weight:bold; }
  button { padding:2px 6px; border-radius:4px; border:none; cursor:pointer; font-size:12px; }
  .inc { background:#2ecc71; }
  .dec { background:#e74c3c; }
  .info-btn { background:#3498db; color:#fff; font-weight:bold; }
  .info-panel { display:none; background:#0c102a; border-left:3px solid #3498db; padding:8px; margin:4px 0 8px; font-size:12px; }
  .actions { display:flex; gap:8px; justify-content:center; margin:8px 0; }
  .actions button { background:#f1c40f; padding:6px 10px; font-size:12px; }
  .name-inputs { display:flex; justify-content:center; gap:20px; margin-bottom:12px; }
  .name-inputs input { padding:4px 8px; border-radius:4px; border:none; font-size:12px; width:120px; }
  canvas { background:#fff; border-radius:6px; width:100%; height:auto; margin-top:6px; }
  .analysis { background:#1b1f3a; padding:10px; border-radius:6px; margin-top:6px; font-size:12px; }
</style>
</head>
<body>

<h1>üìä Fighting Game Analyzer ‚Äì SF6 Coach</h1>
<div class="subtitle">
  Marque quando o jogador <b>EXECUTAR com sucesso</b> a t√©cnica.  
  Automaticamente isso conta como <b>t√©cnica SOFRIDA</b> pelo oponente.
</div>

<div class="name-inputs">
  <div>
    <label for="name-p1">Nome do Jogador 1:</label>
    <input type="text" id="name-p1" placeholder="Jogador 1" />
  </div>
  <div>
    <label for="name-p2">Nome do Jogador 2:</label>
    <input type="text" id="name-p2" placeholder="Jogador 2" />
  </div>
</div>

<div class="grid" id="panels"></div>

<div class="actions">
  <button onclick="resetAll()">Resetar Tudo</button>
  <button onclick="generateAnalysis()">Gerar An√°lise + Gr√°ficos</button>
</div>

<div class="grid">
  <div>
    <h2>üìà Gr√°fico ‚Äì Jogador 1 (executadas)</h2>
    <canvas id="chart-p1" width="500" height="260"></canvas>
    <div class="analysis" id="analysis-p1"></div>
  </div>
  <div>
    <h2>üìà Gr√°fico ‚Äì Jogador 2 (executadas)</h2>
    <canvas id="chart-p2" width="500" height="260"></canvas>
    <div class="analysis" id="analysis-p2"></div>
  </div>
</div>

<script>
const techniques = [
  // üü¢ Neutro
  { cat:"Neutro", name:"Footsies", desc:"Controle de espa√ßo no neutro.", defense:"Aprenda o alcance dos pokes.", improve:"Use mais golpes seguros." },
  { cat:"Neutro", name:"Whiff Punish", desc:"Punir golpes errados.", defense:"N√£o spame golpes no vazio.", improve:"Confirme visualmente antes de apertar." },
  { cat:"Neutro", name:"Punish / Counter", desc:"Punir ataques errados do oponente com golpes de alcance seguro ou combo.", defense:"Evite atacar de forma previs√≠vel; saiba os frames de recovery do oponente.", improve:"Leia os padr√µes do advers√°rio e responda com ataques de maior dano." },
  { cat:"Neutro", name:"Anti-Air", desc:"Punir pulos do oponente.", defense:"Varie timing de pulo.", improve:"Reaja mais r√°pido aos jumps." },
  { cat:"Neutro", name:"Zoning", desc:"Controle de espa√ßo com golpes longos.", defense:"Walk & block; n√£o pule no desespero.", improve:"Alterne proj√©til, fake e avan√ßo." },
  { cat:"Neutro", name:"Neutral Jump", desc:"Pular no neutro para evitar press√£o.", defense:"Punir com ataque anti-air.", improve:"Use para variar tempo e dist√¢ncia." },

  // üîµ Press√£o
  { cat:"Press√£o", name:"Okizeme", desc:"Press√£o no wake-up.", defense:"Varie wake-up e n√£o use reversal sempre.", improve:"Misture meaty, throw e shimmy." },
  { cat:"Press√£o", name:"Meaty", desc:"Ataque no wake-up.", defense:"Observe timing; varie wake-up.", improve:"Treine timing no modo treino." },
  { cat:"Press√£o", name:"Frame Trap", desc:"Punir mash fora de turno.", defense:"Respeite o turno; defenda mais.", improve:"Mude timing para n√£o virar flowchart." },
  { cat:"Press√£o", name:"Throw", desc:"Agarr√£o simples para quebrar defesa.", defense:"Use tech de throw, backdash ou pulo.", improve:"Use ap√≥s vantagem de frames e misture com shimmy." },
  { cat:"Press√£o", name:"Shimmy", desc:"Finta de throw para punir tech.", defense:"Use delay tech; n√£o d√™ tech autom√°tico.", improve:"Varie o spacing." },
  { cat:"Press√£o", name:"Mix-up", desc:"For√ßar adivinha√ß√£o.", defense:"Observe padr√µes.", improve:"Varie op√ß√µes." },
  { cat:"Press√£o", name:"Overhead", desc:"Quebra defesa baixa.", defense:"Troque para guarda em p√©.", improve:"N√£o repita sempre do mesmo setup." },
  { cat:"Press√£o", name:"Corner Pressure", desc:"Press√£o no canto.", defense:"Brigue pra sair do corner.", improve:"Trave op√ß√µes de escape." },
  { cat:"Press√£o", name:"Cross Back", desc:"Passar por tr√°s do oponente para confundir.", defense:"Observe movimenta√ß√£o lateral e bloqueie.", improve:"Varie timing e espa√ßamento." },

  // üü£ Drive System (SF6)
  { cat:"Drive System", name:"Drive Impact", desc:"Golpe de armadura que causa wall splat.", defense:"Use counter DI, multi-hit ou throw.", improve:"Use para punir padr√µes." },
  { cat:"Drive System", name:"Drive Rush", desc:"Avan√ßo r√°pido para press√£o/confirm.", defense:"Check de avan√ßo.", improve:"Use para converter hits." },
  { cat:"Drive System", name:"Drive Parry", desc:"Parry que consome Drive.", defense:"Baitar e atrasar golpes.", improve:"Use em strings previs√≠veis." },
  { cat:"Drive System", name:"Perfect Parry", desc:"Parry no timing perfeito.", defense:"Varie timing/throws.", improve:"Treine rea√ß√£o." },
  { cat:"Drive System", name:"Drive Reversal", desc:"Escape defensivo com Drive.", defense:"Baitar e punir.", improve:"Use quando encurralado." },
  { cat:"Drive System", name:"Burnout Pressure", desc:"Press√£o quando o oponente est√° em Burnout.", defense:"Evite Burnout.", improve:"Abuse do chip damage." },
  { cat:"Drive System", name:"Air Clash", desc:"Quando ataques a√©reos dos dois jogadores colidem, causando pouco ou nenhum dano.", defense:"Evite atacar no mesmo tempo que o oponente; varie altura e timing.", improve:"Use para punir jump-ins ou padr√µes previs√≠veis do advers√°rio."},

  // üî¥ Erros Comuns / Leitura
  { cat:"Erros Comuns", name:"Bait", desc:"Provocar erro do oponente.", defense:"N√£o reaja no autom√°tico.", improve:"Varie recuar e atacar." },
  { cat:"Erros Comuns", name:"Flowchart", desc:"Repetir sempre o mesmo padr√£o.", defense:"Punir o padr√£o.", improve:"Quebre seus pr√≥prios h√°bitos." },
  { cat:"Erros Comuns", name:"Yolo Reversal", desc:"Abusar de reversals sem leitura.", defense:"Baitar e punir.", improve:"Use com crit√©rio." },
  { cat:"Erros Comuns", name:"Resource Management", desc:"Uso ruim do Drive Gauge.", defense:"For√ßar Burnout.", improve:"Gerencie melhor o Drive." },
  { cat:"Erros Comuns", name:"Delay Tech", desc:"Delay na defesa de throws.", defense:"Use tech autom√°tico com leitura.", improve:"Varie tempo de defesa." },
];

const players = [
  { id:"p1", label:"Jogador 1", executed:{}, suffered:{} },
  { id:"p2", label:"Jogador 2", executed:{}, suffered:{} }
];

const panels = document.getElementById("panels");

players.forEach(player => {
  const div = document.createElement("div");
  div.className = "panel";
  div.innerHTML = `<h2>${player.label} ‚Äì T√©cnicas executadas com sucesso</h2>`;

  let lastCat = "";
  techniques.forEach((t, i) => {
    player.executed[t.name] = 0;
    player.suffered[t.name] = 0;

    if (t.cat !== lastCat) {
      const catTitle = document.createElement("h3");
      catTitle.innerText = t.cat;
      div.appendChild(catTitle);
      lastCat = t.cat;
    }

    const wrap = document.createElement("div");
    const row = document.createElement("div");
    row.className = "tech";
    row.innerHTML = `
      <span>${t.name}</span>
      <span id="${player.id}-count-${t.name}">0</span>
      <button class="inc" onclick="inc('${player.id}','${t.name}',1)">+</button>
      <button class="dec" onclick="inc('${player.id}','${t.name}',-1)">-</button>
      <button class="info-btn" onclick="toggleInfo('${player.id}-${i}')">‚ÑπÔ∏è</button>
    `;

    const info = document.createElement("div");
    info.className = "info-panel";
    info.id = `${player.id}-${i}`;
    info.innerHTML = `
      <b>O que √©:</b> ${t.desc}<br/>
      <b>Como usar melhor:</b> ${t.improve}<br/>
      <b>Como se defender:</b> ${t.defense}
    `;

    wrap.appendChild(row);
    wrap.appendChild(info);
    div.appendChild(wrap);
  });

  panels.appendChild(div);
});

function toggleInfo(id) {
  const el = document.getElementById(id);
  el.style.display = el.style.display === "block" ? "none" : "block";
}

function inc(playerId, tech, delta) {
  const p = players.find(x => x.id === playerId);
  const opp = players.find(x => x.id !== playerId);
  p.executed[tech] = Math.max(0, p.executed[tech] + delta);
  opp.suffered[tech] = Math.max(0, opp.suffered[tech] + delta);
  document.getElementById(`${playerId}-count-${tech}`).innerText = p.executed[tech];
}

function resetAll() {
  players.forEach(p => {
    techniques.forEach(t => {
      p.executed[t.name] = 0;
      p.suffered[t.name] = 0;
      document.getElementById(`${p.id}-count-${t.name}`).innerText = 0;
    });
  });
  clearChart("chart-p1");
  clearChart("chart-p2");
  document.getElementById("analysis-p1").innerHTML = "";
  document.getElementById("analysis-p2").innerHTML = "";
}

function clearChart(id) {
  const ctx = document.getElementById(id).getContext("2d");
  ctx.clearRect(0, 0, 500, 260);
}

function generateAnalysis() {
  // Atualizar nomes dos jogadores
  players[0].label = document.getElementById("name-p1").value || "Jogador 1";
  players[1].label = document.getElementById("name-p2").value || "Jogador 2";

  drawChart("p1", "chart-p1", "analysis-p1");
  drawChart("p2", "chart-p2", "analysis-p2");
}

function detectProfile(p) {
  const e = p.executed;
  if ((e["Zoning"] || 0) > 3) return { name:"Zoner", desc:"Controle forte de espa√ßo √† dist√¢ncia." };
  if ((e["Throw"] || 0) > 3) return { name:"Grappler", desc:"Quebra defesa com agarr√µes." };
  if ((e["Okizeme"] || 0) + (e["Meaty"] || 0) > 5) return { name:"Rushdown", desc:"Press√£o constante no close." };
  return { name:"Equilibrado", desc:"Mistura bem v√°rias ferramentas." };
}

function drawChart(pid, chartId, analysisId) {
  const p = players.find(x => x.id === pid);
  const ctx = document.getElementById(chartId).getContext("2d");
  clearChart(chartId);

  const values = Object.values(p.executed);
  const max = Math.max(...values, 1);
  let x = 10;
  const barWidth = 28;

  let html = `<b>üéØ ${p.label} executou mais (pode estar previs√≠vel):</b><ul>`;
  let html2 = `<b>üõ°Ô∏è ${p.label} sofreu mais (treinar defesa contra):</b><ul>`;

  techniques.forEach(t => {
    const v = p.executed[t.name];
    const s = p.suffered[t.name];
    const h = (v / max) * 180;

    ctx.fillStyle = "#4dabf7";
    ctx.fillRect(x, 220 - h, barWidth, h);
    ctx.fillStyle = "#000";
    ctx.fillText(t.name, x, 240);
    ctx.fillText(v, x + 6, 210 - h);

    if (v === max && v > 0) html += `<li><b>${t.name}</b>: ${t.improve}</li>`;
    if (s > 0 && s === Math.max(...Object.values(p.suffered)))
      html2 += `<li><b>${t.name}</b>: ${t.defense}</li>`;

    x += barWidth + 6;
  });

  html += "</ul>";
  html2 += "</ul>";

  const profile = detectProfile(p);
  document.getElementById(analysisId).innerHTML =
    (max === 0) ? "<p>Nenhuma t√©cnica registrada ainda.</p>"
      : html + html2 + `<hr/><b>üß¨ Padr√£o de jogo detectado para ${p.label}:</b> <p><b>${profile.name}</b> ‚Äì ${profile.desc}</p>`;
}
</script>

</body>
</html>